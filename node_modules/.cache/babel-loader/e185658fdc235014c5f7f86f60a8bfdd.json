{"ast":null,"code":"import _toConsumableArray from\"/Users/alexkulemin/Documents/projects/bem-ui-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/alexkulemin/Documents/projects/bem-ui-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import styles from'./AutoComplete.module.scss';export var AutoComplete=function AutoComplete(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),value=_useState4[0],setValue=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),filtered=_useState6[0],setFiltered=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),initialColl=_useState8[0],setInit=_useState8[1];var getData=function getData(){setInit(_toConsumableArray(props.data));setShow(true);if(!!value){setFiltered(initialColl.filter(function(item){return item.indexOf(value)!==-1;}));}};var search=function search(e){setValue(e.target.value);setFiltered(initialColl.filter(function(item){return item.indexOf(e.target.value)!==-1;}));};var getHightLightTitle=function getHightLightTitle(title){var position=title.indexOf(value);return/*#__PURE__*/React.createElement(React.Fragment,null,title.slice(0,position),/*#__PURE__*/React.createElement(\"mark\",{className:styles[\"autocomplete__mark\"]},title.slice(position,position+value.length)),title.slice(position+value.length));};var chooseValue=function chooseValue(e){var elm=e.target.className===styles['autocomplete__mark']?e.target.parentNode:e.target;setValue(elm.textContent);var clear=setTimeout(function(_){clearInterval(clear);setFiltered([]);},400);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(styles['form-control'],\" \").concat(show?styles['show']:'',\"  \").concat(value?styles['form-control_active']:'')},/*#__PURE__*/React.createElement(\"div\",{className:styles['form-control__wrap']},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:styles[\"form-control__input\"],value:value,onFocus:getData,onChange:search,onBlur:function onBlur(_){return setShow(false);}}),/*#__PURE__*/React.createElement(\"label\",{className:styles[\"form-control__label\"]},props.label),/*#__PURE__*/React.createElement(\"span\",{className:styles[\"form-control__line\"]}),/*#__PURE__*/React.createElement(\"i\",{className:\"\".concat(styles[\"form-control__icon\"],\" icon-down show\")})),/*#__PURE__*/React.createElement(\"aside\",{className:styles[\"autocomplete__box\"]},/*#__PURE__*/React.createElement(\"ul\",{className:styles[\"autocomplete\"]},filtered.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{className:styles[\"autocomplete__item\"],key:Math.random(),onMouseDown:chooseValue},getHightLightTitle(item));})))));};","map":{"version":3,"names":["React","useState","styles","AutoComplete","props","_useState","_useState2","_slicedToArray","show","setShow","_useState3","_useState4","value","setValue","_useState5","_useState6","filtered","setFiltered","_useState7","_useState8","initialColl","setInit","getData","_toConsumableArray","data","filter","item","indexOf","search","e","target","getHightLightTitle","title","position","createElement","Fragment","slice","className","length","chooseValue","elm","parentNode","textContent","clear","setTimeout","_","clearInterval","concat","type","onFocus","onChange","onBlur","label","map","key","Math","random","onMouseDown"],"sources":["/Users/alexkulemin/Documents/projects/bem-ui-library/src/ui/components/AutoComplete/index.js"],"sourcesContent":["import React, {useState} from 'react';\nimport styles from './AutoComplete.module.scss';\n\nexport const AutoComplete = (props) => {\n    const [show, setShow] = useState(false);\n    const [value, setValue] = useState('');\n    const [filtered, setFiltered] = useState([]);\n    const [initialColl, setInit] = useState([]);\n\n    const getData = () => {\n        setInit([...props.data])\n        setShow(true);\n\n        if(!!value) {\n            setFiltered(initialColl.filter(item => item.indexOf(value) !== -1 ));\n        }\n    }\n    \n    const search = (e) => {\n        setValue(e.target.value);\n        setFiltered(initialColl.filter(item => item.indexOf(e.target.value) !== -1 ));\n    }\n\n    const getHightLightTitle = (title) => {\n        const position = title.indexOf(value);\n        \n        return(\n            <>\n                {title.slice(0, position)}\n                <mark className={styles[\"autocomplete__mark\"]}>\n                    {title.slice(position, position + value.length)}\n                </mark>\n                {title.slice(position + value.length)}\n            </>\n        )\n    }\n\n    const chooseValue = (e) => {\n        \n        const elm = e.target.className === styles['autocomplete__mark'] ? e.target.parentNode : e.target;\n\n        setValue(elm.textContent);\n        \n        const clear = setTimeout(_ => {\n            clearInterval(clear)\n            setFiltered([]);\n        }, 400)\n    }\n\n    return(\n        <>\n        <div className={`${styles['form-control']} ${show ? styles['show']:''}  ${value ? styles['form-control_active']:''}`}>\n            <div className={styles['form-control__wrap']}>\n                <input \n                    type=\"text\" \n                    className={styles[\"form-control__input\"]} \n                    value={value} \n                    onFocus={getData}\n                    onChange={search} \n                    onBlur={_ => setShow(false)}\n                />\n                <label className={styles[\"form-control__label\"]}>\n                    {props.label}\n                </label>\n                <span className={styles[\"form-control__line\"]}></span>\n                <i className={`${styles[\"form-control__icon\"]} icon-down show`}></i>\n            </div>\n\n            <aside className={styles[\"autocomplete__box\"]} >\n                <ul className={styles[\"autocomplete\"]}>\n                    {filtered.map((item) =>(\n                        <li className={styles[\"autocomplete__item\"]} \n                            key={Math.random()}\n                            onMouseDown={chooseValue}\n                        >\n                            {getHightLightTitle(item)}\n                        </li>\n                    ))}\n                </ul>\n            </aside>\n        </div>\n        </>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}